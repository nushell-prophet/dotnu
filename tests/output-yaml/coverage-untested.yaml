# # Public API from mod.nu
# let public_api = open ([dotnu mod.nu] | path join)
# | lines
# | where $it =~ '^\s+"'
# | each { $in | str trim | str replace -r '^"([^"]+)".*' '$1' }
# 
# # Find untested commands
# let untested = [
# ...(glob $"dotnu(char psep)*.nu")
# ([tests test_commands.nu] | path join)
# "toolkit.nu"
# ]
# | dependencies ...$in
# | filter-commands-with-no-tests
# | where caller in $public_api
# | select caller
# 
# # Output as yaml
# {
# public_api_count: ($public_api | length)
# tested_count: (($public_api | length) - ($untested | length))
# untested: ($untested | get caller)
# }
# | to yaml
public_api_count: 13
tested_count: 10
untested:
- embed-add
- embeds-capture-start
- embeds-capture-stop
